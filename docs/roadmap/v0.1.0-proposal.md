# v0.1.0 Release Proposal

**Theme**: Incremental improvements - better UX, smarter indexing, extended metadata

## Proposed Features

### 1. Skip Unchanged Files (High Impact)
**Effort**: 4-6 hours | **Impact**: 90%+ faster re-scans

Track last indexed timestamp per file. On re-scan, skip files where `file.ModifiedAt <= lastIndexedAt`.

**Changes**:
- Add `LastIndexedAt` column to `IndexedFiles` table
- API endpoint: `GET /api/files/needs-reindex?directoryId={id}`
- IndexingService: Query API before processing, skip unchanged

**Benefit**: Re-indexing 1.1M files drops from hours to minutes.

---

### 2. Extended EXIF Metadata Storage
**Effort**: 3-4 hours | **Impact**: Better file information

Store additional EXIF fields in database:
- `DateTaken` (from EXIF, not file system)
- `CameraMake`, `CameraModel`
- `GpsLatitude`, `GpsLongitude`
- `Iso`, `Aperture`, `ShutterSpeed`

**Changes**:
- EF Core migration: Add columns to `IndexedFiles`
- Update `MetadataExtractor` to extract these fields
- Update `IngestFileItem` DTO with new fields
- API returns extended metadata

---

### 3. File Detail Page (Web UI)
**Effort**: 4-5 hours | **Impact**: Better UX

New route `/files/:id` with:
- Large thumbnail preview
- All metadata (EXIF, file system, duplicate status)
- "Copy path to clipboard" button
- Link to duplicate group if applicable
- Back navigation

**Changes**:
- New Angular component: `FileDetailComponent`
- New route configuration
- API: Ensure `GET /api/files/{id}` returns full details

---

### 4. Copy Path to Clipboard
**Effort**: 1 hour | **Impact**: Fixes broken "view file"

Replace non-functional "view file" button with "copy path":
- Click copies full file path to clipboard
- Toast notification: "Path copied!"
- Works across all browsers

**Changes**:
- Update file list component
- Add clipboard service
- Remove broken viewer code

---

### 5. Indexing Progress API
**Effort**: 2-3 hours | **Impact**: Better visibility

Real-time progress during indexing:
- `GET /api/indexing/status` returns current state
- Fields: `isRunning`, `currentDirectory`, `filesScanned`, `filesIngested`, `startedAt`
- Web UI shows progress indicator

**Changes**:
- Add `IndexingStatusService` to track state
- New API endpoint
- Angular polling or SignalR for updates

---

### 6. Automatic Retry for Failed Files
**Effort**: 2 hours | **Impact**: Better reliability

Files that fail (permission denied, locked, etc.) are retried on next cycle:
- Track `LastError` and `RetryCount` per file
- Exponential backoff for persistent failures
- Dashboard shows failed file count

**Changes**:
- Add `LastError`, `RetryCount` columns
- Retry logic in `IndexingOrchestrator`
- API endpoint for failed files list

---

## Release Scope Summary

| Feature | Effort | Priority | Status |
|---------|--------|----------|--------|
| Skip unchanged files | 4-6h | P0 | Proposed |
| Extended EXIF metadata | 3-4h | P0 | Proposed |
| File detail page | 4-5h | P1 | Proposed |
| Copy path to clipboard | 1h | P1 | Proposed |
| Indexing progress API | 2-3h | P2 | Proposed |
| Automatic retry | 2h | P2 | Proposed |

**Total estimated effort**: 16-21 hours

---

## What's NOT in v0.1.0

These are deferred to later versions:
- ❌ Service Bus / Message Queue (v0.2.0+)
- ❌ Thumbnail offloading to MPC (v0.2.0+)
- ❌ Full compute offloading (v0.3.0+)
- ❌ Smaller base images migration (can go in v0.0.7)
- ❌ GPS map integration (future)
- ❌ Duplicate auto-resolution (future)

---

## Migration Notes

**Database migration required**: Yes (new EXIF columns, LastIndexedAt)

```bash
dotnet ef migrations add ExtendedMetadata --project src/Database --startup-project src/Api
```

**Breaking changes**: None - all additions are backward compatible.

---

## Success Criteria

- [ ] Re-scan of 1.1M files completes in < 15 minutes (skip unchanged)
- [ ] File detail page shows camera, GPS, and all EXIF data
- [ ] Copy path works on Chrome, Firefox, Safari, Edge
- [ ] Progress visible in web UI during indexing
- [ ] Failed files tracked and retried automatically
