# Photos Index - Synology NAS Deployment Configuration
# Copy this file to .env on your Synology NAS

# ===================================
# Database Configuration
# ===================================
POSTGRES_USER=photosuser
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=photosindex
POSTGRES_PORT=5432

# ===================================
# Photo Library Configuration
# ===================================

# IMPORTANT: Set this to your actual Synology photo directory
# Examples:
#   /volume1/photo              - Default Synology Photos location
#   /volume1/homes/user/Photos  - User's Photos folder
#   /volume2/family-photos      - Custom folder on volume2
HOST_PHOTOS_DIRECTORY=/volume1/photo

# Container path (don't change unless you modify docker-compose)
PHOTOS_DIRECTORY=/photos

# Trash directory for soft-deleted duplicates
# Must be writable - use a subfolder within your photos or a separate location
TRASH_DIRECTORY=/photos/.photos-index-trash

# ===================================
# Indexing Configuration
# ===================================

# How often to scan for new/changed files (in minutes)
# 60 = hourly, 1440 = daily, 10080 = weekly
INDEXING_INTERVAL_MINUTES=1440

# Service versions (for tracking in observability)
API_VERSION=1.0.0
INDEXING_VERSION=1.0.0
CLEANER_VERSION=1.0.0

# ===================================
# Cleaner Service (Duplicate Removal)
# ===================================

# IMPORTANT: Keep this FALSE until you've verified duplicate detection
# is working correctly for your photo library
CLEANER_ENABLED=false

# ===================================
# Web Interface
# ===================================

# Port for the web interface
# Access at: http://your-nas-ip:80
TRAEFIK_HTTP_PORT=8888

# Dashboard port for Traefik (optional, for debugging)
TRAEFIK_DASHBOARD_PORT=8889

# Disable insecure dashboard in production
TRAEFIK_DASHBOARD_INSECURE=false

# Aspire Dashboard for observability (logs, traces, metrics)
# Access at: http://your-nas-ip:18888
ASPIRE_DASHBOARD_PORT=18888

# API direct access (optional, normally use via Traefik)
API_PORT=5000

# Web direct access (optional, normally use via Traefik)
WEB_PORT=4200

# API URL for web interface (use relative URL with Traefik)
API_URL=/api

# ===================================
# Performance Settings
# ===================================

# Production mode for better performance
ASPNETCORE_ENVIRONMENT=Production

# Reduce trace sampling in production (0.1 = 10% of requests)
TRAEFIK_TRACE_SAMPLE_RATE=0.1

# Reduce logging verbosity
TRAEFIK_LOG_LEVEL=WARN
TRAEFIK_ACCESS_LOG=false

# ===================================
# Multiple Photo Directories (Advanced)
# ===================================

# To index multiple directories, you have two options:
#
# Option 1: Mount parent directory
#   HOST_PHOTOS_DIRECTORY=/volume1
#   Then configure scan directories in the web UI:
#   - /photos/photo
#   - /photos/family-photos
#   - /photos/vacation-2024
#
# Option 2: Create symbolic links
#   On your NAS, create a directory with symlinks:
#   mkdir /volume1/photos-index
#   ln -s /volume1/photo /volume1/photos-index/main
#   ln -s /volume2/archive /volume1/photos-index/archive
#   HOST_PHOTOS_DIRECTORY=/volume1/photos-index
