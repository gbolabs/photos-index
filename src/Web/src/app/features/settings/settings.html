<div class="settings">
  <div class="settings__header">
    <div>
      <h1>Directory Settings</h1>
      <p class="settings__subtitle">Manage directories to scan for photos</p>
    </div>
    <div class="settings__actions">
      <button mat-icon-button (click)="onRefresh()" [disabled]="loading()" matTooltip="Refresh">
        <mat-icon>refresh</mat-icon>
      </button>
      <button mat-raised-button color="primary" (click)="onAddDirectory()" [disabled]="loading()">
        <mat-icon>add</mat-icon>
        Add Directory
      </button>
    </div>
  </div>

  @if (error()) {
    <div class="settings__error">
      <p>{{ error() }}</p>
      <button mat-raised-button color="primary" (click)="onRefresh()">Retry</button>
    </div>
  }

  @if (loading() && directories().length === 0) {
    <div class="settings__loading">
      <mat-spinner diameter="48"></mat-spinner>
      <p>Loading directories...</p>
    </div>
  } @else {
    <div class="settings__content">
      <app-directory-list
        [directories]="directories()"
        [loading]="loading()"
        (edit)="onEditDirectory($event)"
        (delete)="onDeleteDirectory($event)"
        (toggle)="onToggleDirectory($event)"
        (refreshMetadata)="onRefreshMetadata($event)"
      />
    </div>
  }

  <!-- Hidden Folders Section -->
  <div class="settings__section">
    <app-hidden-folders />
  </div>

  <!-- About Section -->
  <mat-divider class="settings__divider"></mat-divider>
  <div class="settings__section settings__about">
    <h2>About</h2>
    <mat-card class="about-card">
      <mat-card-content>
        <div class="about-info">
          <div class="about-logo">
            <mat-icon>photo_library</mat-icon>
          </div>
          <div class="about-details">
            <h3>Photos Index</h3>
            <p class="version">{{ appVersion }}</p>
            <p class="description">Photo indexing and deduplication application for NAS storage.</p>
            <p class="links">
              <a href="https://github.com/gbolabs/photos-index" target="_blank" rel="noopener noreferrer">
                <mat-icon>code</mat-icon> GitHub
              </a>
            </p>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
